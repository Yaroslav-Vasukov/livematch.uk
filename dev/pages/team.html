{% extends "../layouts/_base.html" %}
{% set currentPage = 'team' %}
{% block title %}{{ teamData.name }} - Team Profile{% endblock %}
{% block active_nav %}team{% endblock %}
{% block head_extra %}
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
/>
{% endblock %}
{% block body_class %}page page--team{% endblock %}

{% block content %}
{% set teamData = load_json('data/team.json') %}
{% set calendarData = load_json('data/calendar.json') %}
{% set postsData = load_json('data/posts.json') %}
{% set premierLeague = load_json("@/data/leagues/premier-league.json") %} 
{# Page Header #}
{% include '../components/page-header/page-header.twig' with {
  title: teamData.name,
  subtitle: teamData.league.name ~ ' â€¢ Founded ' ~ teamData.founded,
  mod: 'compact',
  breadcrumbs: [
    { label: 'Home', url: '/' },
    { label: 'Teams', url: '/teams' },
    { label: teamData.name }
  ]
} %}

{# Team Hero Card #}
<section class="section">
  <div class="container">
    <div class="section__inner">
      <div class="team-hero-card">
        <div class="team-hero-card__logo">
          <img src="{{ teamData.logo }}" alt="{{ teamData.name }}">
        </div>
        
        <div class="team-hero-card__info">
          <div class="team-hero-card__primary">
            <div class="team-hero-card__item">
              <span class="team-hero-card__label">Stadium</span>
              <span class="team-hero-card__value">{{ teamData.stadium.name }}</span>
            </div>
            <div class="team-hero-card__item">
              <span class="team-hero-card__label">Capacity</span>
              <span class="team-hero-card__value">{{ teamData.stadium.capacity|number_format(0, '.', ',') }}</span>
            </div>
            <div class="team-hero-card__item">
              <span class="team-hero-card__label">Founded</span>
              <span class="team-hero-card__value">{{ teamData.founded }}</span>
            </div>
          </div>
          
          <div class="team-hero-card__manager">
            <img src="{{ teamData.manager.avatar }}" alt="{{ teamData.manager.name }}">
            <div class="team-hero-card__manager-info">
              <span class="team-hero-card__manager-label">Manager</span>
              <span class="team-hero-card__manager-name">{{ teamData.manager.name }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

{# Season Statistics #}
<section class="section section--margin">
  <div class="container">
    <div class="section__inner">
      {% include '../components/section-header/section-header.twig' with {
        title: 'Season Statistics',
        icon: 'query_stats',
        show_more: false
      } %}
      
      {% include '../components/player-stats/player-stats.twig' with {
        stats: teamData.statistics
      } %}
    </div>
  </div>
</section>
<section class="section section--margin">
  <div class="container">
    <div class="section__inner">
            {% include '../components/section-header/section-header.twig' with {
        title: 'Popular Lives',
        icon: 'schedule',
        more: 'All Lives',
        more_href: '/lives'
      } %}
                        <div
        class="swiper home-videos-swiper"
        data-swiper='{
               "slidesPerView": 1,
               "spaceBetween": 16,
               "loop": true,
               "autoplay": { "delay": 2500, "disableOnInteraction": false },
               "breakpoints": {
                 "0":  { "slidesPerView": 1 },
                 "1100":  { "slidesPerView": 2 }
               }
             }'
      >
        <div class="swiper-wrapper">
            {% for calendarEvent in calendarData %}
          <div class="swiper-slide">
              {% include '../components/card-match/card-match.twig' %}
          </div>
          {% else %}
          <div class="swiper-slide"><p class="muted">No matches.</p></div>
          {% endfor %}
        </div>
        <div class="swiper-button__wrap">
          <button
            class="swiper-button-prev"
            data-swiper-prev
            aria-label="Prev"
          ></button>
          <button
            class="swiper-button-next"
            data-swiper-next
            aria-label="Next"
          ></button>
        </div>
      </div>
    </div>
  </div>
</section>
{# Team Information & Achievements #}
<section class="section section--margin">
  <div class="container">
    <div class="section__inner">
      <div class="team-info-grid">
        
        {# Team Information #}
        <div class="team-info">
          {% include '../components/section-header/section-header.twig' with {
            title: 'Team Information',
            icon: 'info',
        show_more: false
          } %}
          
          <div class="team-info__list">
            {% for item in teamData.info %}
              <div class="team-info__item">
                <span class="team-info__label">{{ item.label }}</span>
                <span class="team-info__value">{{ item.value }}</span>
              </div>
            {% endfor %}
          </div>
        </div>
        
        {# Achievements #}
        <div class="team-achievements">
          {% include '../components/section-header/section-header.twig' with {
            title: 'Recent Achievements',
            icon: 'emoji_events',
        show_more: false
          } %}
          
          <div class="team-achievements__list">
            {% for achievement in teamData.achievements %}
              <div class="team-achievements__item">
                <span class="material-symbols-outlined team-achievements__icon">
                  {{ achievement.icon }}
                </span>
                <div class="team-achievements__content">
                  <div class="team-achievements__title">{{ achievement.title }}</div>
                  <div class="team-achievements__year">{{ achievement.year }}</div>
                </div>
              </div>
            {% endfor %}
          </div>
        </div>
        
      </div>
    </div>
  </div>
</section>

{# Team History #}
<section class="section section--margin">
  <div class="container">
    <div class="section__inner">
      {% include '../components/section-header/section-header.twig' with {
        title: 'Club History',
        icon: 'history_edu',
        show_more: false
      } %}
      
      <div class="team-history">
        <div class="team-history__content">
          {{ teamData.history|raw }}
        </div>
      </div>
    </div>
  </div>
</section>

{# Squad #}
<section class="section section--margin">
  <div class="container">
    <div class="section__inner">
      {% include '../components/section-header/section-header.twig' with {
        title: 'Current Squad',
        icon: 'groups',
        show_more: false
      } %}
      
      {% include '../components/table/table.twig' with {
        variant: 'default',
        columns: [
          { key: 'pos', label: '#', align: 'center', width: '60px' },
          { key: 'player', label: 'Player', type: 'player', align: 'left', width: 'minmax(200px, 1fr)' },
          { key: 'number', label: 'No.', align: 'center', width: '80px' },
          { key: 'nationality', label: 'Country', align: 'left', width: '120px' },
          { key: 'age', label: 'Age', type: 'number', align: 'center', width: '80px' },
          { key: 'apps', label: 'Apps', type: 'number', align: 'center', width: '80px' },
          { key: 'goals', label: 'Goals', type: 'number', align: 'center', width: '80px' },
          { key: 'assists', label: 'Assists', type: 'number', align: 'center', width: '80px' }
        ],
        rows: teamData.squad
      } only %}
    </div>
  </div>
</section>
<section class="section section--margin">
  <div class="container">
    <div class="section__inner">
            {% include '../components/section-header/section-header.twig' with {
        title: 'Premier League Stats',
        icon: 'sports',
              show_more: false
      } %}
      {% include '../components/stats-section/stats-section.twig' with {
  subtitle: statsData.subtitle,
  stats: statsData.stats
} %}

    </div>
  </div>
</section>
<section class="section section--margin">
  <div class="container">
    <div class="section__inner">
      {% include '../components/section-header/section-header.twig' with {
        title: 'Latest News',
        icon: 'article',
        more: 'See All News',
        more_href: '/news'
      } %}
            <div class="news__layout">
        
        <div class="news__main">

          {% for post in postsData|slice(0, 10) %}
              {% include '../components/card-post/card-post-horizontal.twig' with { post: post } %}
          {% endfor %}
        </div>

        <aside class="news__sidebar">
          <h3 class="news__sidebar-title">Trending</h3>
          {% for post in postsData|slice(10, 3) %}
            <div class="card-post--compact">
              {% include '../components/card-post/card-post.twig' with { post: post } %}
            </div>
          {% endfor %}
        </aside>

      </div>
        </div>
    </div>
  </div>
</section>
{% block scripts %}
<script
  defer
  src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"
></script>
{% endblock %}

{% endblock %}