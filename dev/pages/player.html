{% extends "../layouts/_base.html" %}
{% set currentPage = 'player' %}
{% block title %}{{ playerData.name }} - Player Profile{% endblock %}
{% block active_nav %}teams{% endblock %}
{% block body_class %}page page--player{% endblock %}

{% block content %}
{% set playerData = load_json('data/player.json') %}

{# Page Header #}
{% include '../components/page-header/page-header.twig' with {
  title: playerData.name,
  subtitle: playerData.position ~ ' • ' ~ playerData.nationality ~ ' • #' ~ playerData.number,
  mod: 'compact',
  breadcrumbs: [
    { label: 'Home', url: '/' },
    { label: playerData.team.name, url: playerData.team.href },
    { label: playerData.name }
  ]
} %}

{# Player Hero Card #}
<section class="section">
  <div class="container">
    <div class="section__inner">
      <div class="player-hero-card">
        <div class="player-hero-card__image">
          <img src="{{ playerData.avatar }}" alt="{{ playerData.name }}">
          <div class="player-hero-card__number">{{ playerData.number }}</div>
        </div>
        
        <div class="player-hero-card__info">
          <div class="player-hero-card__team">
            <img src="{{ playerData.team.logo }}" alt="{{ playerData.team.name }}">
            <span>{{ playerData.team.name }}</span>
          </div>
          
          <div class="player-hero-card__stats-quick">
            <div class="player-hero-card__stat">
              <span class="player-hero-card__stat-value">{{ playerData.age }}</span>
              <span class="player-hero-card__stat-label">Years</span>
            </div>
            <div class="player-hero-card__stat">
              <span class="player-hero-card__stat-value">{{ playerData.nationality }}</span>
              <span class="player-hero-card__stat-label">Country</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

{# Season Statistics #}
<section class="section section--margin">
  <div class="container">
    <div class="section__inner">
      {% include '../components/section-header/section-header.twig' with {
        title: 'Season Statistics',
        icon: 'sports',
        show_more: false
      } %}
      
      {% include '../components/player-stats/player-stats.twig' with {
        stats: playerData.statistics
      } %}
    </div>
  </div>
</section>

{# Player Information & Achievements #}
<section class="section section--margin">
  <div class="container">
    <div class="section__inner">
      <div class="player-info-grid">
        
        {# Player Information #}
        <div class="player-info">
          {% include '../components/section-header/section-header.twig' with {
            title: 'Player Information',
            icon: 'person',
        show_more: false
          } %}
          
          <div class="player-info__list">
            {% for item in playerData.info %}
              <div class="player-info__item">
                <span class="player-info__label">{{ item.label }}</span>
                <span class="player-info__value">{{ item.value }}</span>
              </div>
            {% endfor %}
          </div>
        </div>
        
        {# Achievements #}
        <div class="player-achievements">
          {% include '../components/section-header/section-header.twig' with {
            title: 'Achievements',
            icon: 'emoji_events',
        show_more: false
          } %}
          
          <div class="player-achievements__list">
            {% for achievement in playerData.achievements %}
              <div class="player-achievements__item">
                <span class="material-symbols-outlined player-achievements__icon">
                  {{ achievement.icon }}
                </span>
                <div class="player-achievements__content">
                  <div class="player-achievements__title">{{ achievement.title }}</div>
                  <div class="player-achievements__year">{{ achievement.year }}</div>
                </div>
              </div>
            {% endfor %}
          </div>
        </div>
        
      </div>
    </div>
  </div>
</section>

{# Biography #}
<section class="section section--margin">
  <div class="container">
    <div class="section__inner">
      {% include '../components/section-header/section-header.twig' with {
        title: 'Biography',
        icon: 'article',
        show_more: false
      } %}
      
      <div class="player-bio">
        <div class="player-bio__content">
          {{ playerData.biography|raw }}
        </div>
      </div>
    </div>
  </div>
</section>

{# Career History #}
<section class="section section--margin">
  <div class="container">
    <div class="section__inner">
      {% include '../components/section-header/section-header.twig' with {
        title: 'Career History',
        icon: 'history',
        show_more: false
      } %}
      
 {% include '../components/table/table.twig' with {
        variant: 'default',
        columns: [
          { key: 'season', label: 'Season', align: 'left', width: '120px' },
          { key: 'team', label: 'Team', type: 'team', align: 'left', width: 'minmax(200px, 1fr)' },
          { key: 'competition', label: 'Competition', align: 'left', width: '180px' },
          { key: 'apps', label: 'Apps', type: 'number', align: 'center', width: '80px' },
          { key: 'goals', label: 'Goals', type: 'number', align: 'center', width: '80px' },
          { key: 'assists', label: 'Assists', type: 'number', align: 'center', width: '80px' }
        ],
        rows: playerData.career
      } only %}
    </div>
  </div>
</section>

{% endblock %}